# Plan: Snowcraft 雪球大戰遊戲開發

根據草稿設計文件，使用 Vanilla JavaScript + Canvas API 開發一款俯視角（視覺傾斜效果）的雪球大戰即時策略遊戲，包含 3 個關卡、3 種敵人 AI 類型、以及完整的角色狀態系統。

## Steps

1. **建立 `index.html` 基礎結構**：包含 Canvas 元素、UI 覆蓋層（生命值、關卡資訊、剩餘敵人）、開始/勝利/失敗畫面。

2. **開發 `style.css` 樣式**：設定 4:3 比例畫布、UI 元素定位、蓄力條樣式、遊戲狀態畫面（開始/勝利/失敗）。

3. **實作 `game.js` 核心模組**：

   - **GameConfig**：集中管理所有數值設定（擊中次數、冷卻時間、關卡配置等）
   - **Character 類別**：管理角色狀態（Idle/Moving/Charging/Throwing/Stunned/Invincible）、位置、被擊中次數
   - **Player 類別**：繼承 Character，處理拖拉移動、蓄力投擲、3 條命與復活機制
   - **Enemy 類別**：繼承 Character，實作三種 AI 類型（隨機型/追擊型/狙擊型）
   - **Snowball 類別**：雪球物理、碰撞檢測
   - **Renderer**：Canvas 繪製俯視角角色（橢圓形呈現傾斜效果）、雪球、蓄力條
   - **Game 主控制器**：遊戲循環、關卡管理、輸入處理

4. **實作滑鼠互動系統**：拖拉移動角色、按住蓄力（0.8 秒上限）並顯示垂直蓄力條、放開投擲雪球。

5. **開發敵人 AI 行為**：隨機型隨機移動、追擊型追蹤玩家、狙擊型保持距離，全部以 0.5~1 秒間隔自動投擲。

6. **完成遊戲流程**：關卡切換邏輯、勝利/失敗判定、UI 更新顯示。

## 技術決策

1. **視角處理**：俯視角 + 視覺傾斜效果（使用橢圓形呈現角色），無需複雜的 Isometric 座標轉換。

2. **碰撞檢測**：使用圓形碰撞檢測（計算兩點距離 vs 半徑總和），符合視覺效果且計算簡單。

3. **雪球軌跡**：直線飛行（從起點到終點），暫不實作拋物線動畫。
